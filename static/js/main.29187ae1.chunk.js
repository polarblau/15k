(this.webpackJsonp15k=this.webpackJsonp15k||[]).push([[0],{67:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var r=n(5),o=n(0),c=n.n(o),a=n(9),s=n.n(a),u=(n(67),n(11)),i=n(103),l=n(108),f=n(109),j=function(e){var t=Object(o.useState)(!1),n=Object(u.a)(t,2),c=(n[0],n[1],Object(o.useState)(null)),a=Object(u.a)(c,2),s=a[0],j=a[1],d=Object(o.useState)(""),b=Object(u.a)(d,2),O=b[0],v=b[1];return Object(r.jsxs)(i.a,{elevation:3,className:"form",children:[Object(r.jsx)("form",{onSubmit:function(t){t.preventDefault(),e.platform.getSearchService().geocode({q:O},(function(t){var n=t.items[0];if(n){var r=n.position,o=n.title,c=n.address,a=c.county,s=c.postalCode;e.onResult({coords:r,county:a,postalCode:s}),v(o)}else j("Nothing found for this input.")}),(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.error("GEOCODING ERROR!",t),j("Something went wrong. Please try again.")}))},children:Object(r.jsx)(l.a,{fullWidth:!0,label:"Search for address",variant:"outlined",value:O,onChange:function(e){j(!1),v(e.target.value)},error:!!s})}),s&&Object(r.jsx)(f.a,{severity:"error",children:s})]})},d=n(52),b=n.n(d),O=n(53),v=n.n(O),p=n(110),m=n(107),g=function(e){var t=Object(o.useState)("car"),n=Object(u.a)(t,2),c=n[0],a=n[1];return Object(r.jsx)(i.a,{elevation:3,className:"travel-mode-select",children:Object(r.jsxs)(p.a,{value:c,exclusive:!0,onChange:function(t,n){a(n),e.onChange(n)},children:[Object(r.jsx)(m.a,{value:"car",children:Object(r.jsx)(b.a,{})}),Object(r.jsx)(m.a,{value:"pedestrian",children:Object(r.jsx)(v.a,{})})]})})},h=n(15),x=function(e){var t=Object(o.useRef)(null),n=Object(o.useState)(null),a=Object(u.a)(n,2),s=a[0],i=a[1],l=Object(o.useState)(null),f=Object(u.a)(l,2),j=f[0],d=f[1];Object(o.useLayoutEffect)((function(){if(t.current){var n=new h.a.service.Platform({apikey:"mPpQR16YV3tZ3YpokLwD4hFCEpwCKJWXe9Q-wv4EXIU"});d(n);var r=n.createDefaultLayers(),o=new h.a.Map(t.current,r.vector.normal.map,{pixelRatio:window.devicePixelRatio,center:e.center,zoom:e.zoom});new h.a.mapevents.Behavior(new h.a.mapevents.MapEvents(o));return i(o),function(){return o.dispose()}}}),[t]),Object(o.useEffect)((function(){if(s){var t=function(e){s.getViewPort().resize()},n=function(t){var n=s.screenToGeo(t.currentPointer.viewportX,t.currentPointer.viewportY);e.onClick(n)};return window.addEventListener("resize",t),s.addEventListener("tap",n),function(){window.removeEventListener("resize",t),s.removeEventListener("tap",n)}}}),[s]),Object(o.useEffect)((function(){s&&(s.setCenter(e.center),e.zoomBounds?s.getViewModel().setLookAtData({bounds:e.zoomBounds}):s.setZoom(e.zoom))}),[e.center,e.zoom,e.zoomBounds]);return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:"map",ref:t}),s?function(){var t=e.children;if(t)return c.a.Children.map(t,(function(e){if(e)return c.a.cloneElement(e,{map:s,platform:j})}))}():"Loading\u2026"]})},w=function(e){return Object(o.useEffect)((function(){var t=new h.a.map.Marker(e.coords);return e.map.addObject(t),function(){return e.map.removeObject(t)}}),[e.coords]),null},y=function(e){var t={fillColor:"rgba(255, 255, 255, 0)",strokeColor:"#FF443F",lineDash:[3,3],lineWidth:3};return Object(o.useEffect)((function(){var n=new h.a.map.Circle(e.coords,e.radius,{style:t});return e.map.addObject(n),e.onBoundsChange(n.getBoundingBox()),function(){return e.map.removeObject(n)}}),[e.coords,e.radius]),null},E=n(41),S=function(e){var t=Object(o.useState)(null),n=Object(u.a)(t,2),r=n[0],c=n[1],a={lineWidth:0};return Object(o.useEffect)((function(){e.platform.getRoutingService(null,8);var t={start:"geo!".concat(e.coords.lat,",").concat(e.coords.lng),range:e.range,rangetype:e.rangeType||"distance",mode:"shortest;".concat(e.travelMode)};fetch("https://isoline.route.ls.hereapi.com/routing/7.2/calculateisoline.json?"+function(e){var t="";for(var n in e)""!=t&&(t+="&"),t+=n+"="+encodeURIComponent(e[n]);return t}(Object(E.a)(Object(E.a)({},t),{},{apikey:e.platform.a}))).then((function(e){return e.json()})).then((function(e){var t=e.response.isoline[0].component[0].shape.map((function(e){return e.split(",")})).flat().map((function(e){return+e}));c(h.a.geo.LineString.fromLatLngArray(t))}))}),[e.coords,e.range,e.travelMode]),Object(o.useEffect)((function(){if(r){var t=new h.a.map.Polygon(r,e.radius,{style:a});return e.map.addObject(t),function(){return e.map.removeObject(t)}}}),[r]),null},C=function(e){var t=Object(o.useState)(null),n=Object(u.a)(t,2),c=n[0],a=n[1],s=Object(o.useState)(null),i=Object(u.a)(s,2),l=i[0],f=i[1];return Object(o.useEffect)((function(){fetch("https://services7.arcgis.com/mOBPykOjAyBO2ZKk/arcgis/rest/services/RKI_Landkreisdaten/FeatureServer/0/query?where=1%3D1&outFields=GEN,cases_per_population,county,last_update,cases7_per_100k,cases_per_100k&returnGeometry=false&outSR=4326&f=json").then((function(e){return e.json()})).then((function(e){a(function(e){var t=e.features.map((function(e){var t,n=e.attributes;return[n.GEN,{name:n.GEN,count:n.cases7_per_100k,status:(t=n.cases7_per_100k,t>200?"hotSpot":t>50?"riskArea":"ok"),updatedAt:n.last_update}]}));return Object.fromEntries(t)}(e))}))}),[]),Object(o.useEffect)((function(){c&&c[e.county]&&f(c[e.county])}),[e.county]),Object(r.jsx)(r.Fragment,{children:l&&Object(r.jsxs)("div",{children:[l.name,": ",l.status," (",l.count,")"]})})},k={lat:51.354050638053394,lng:10.688718943513482},L=function(e){var t=Object(o.useState)(k),n=Object(u.a)(t,2),c=n[0],a=n[1],s=Object(o.useState)(null),i=Object(u.a)(s,2),l=i[0],f=i[1],d=Object(o.useState)("car"),b=Object(u.a)(d,2),O=b[0],v=b[1],p=Object(o.useState)(),m=Object(u.a)(p,2),h=m[0],E=m[1];Object(o.useEffect)((function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){a(function(e){return{lat:e.latitude,lng:e.longitude}}(e.coords))}),(function(){}))}),[]);var L=function(){return!Object.is(c,k)};return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsxs)(x,{center:c,zoom:L()?12:8,zoomBounds:h,onClick:function(){},children:[L()&&Object(r.jsx)(w,{coords:c}),L()&&Object(r.jsx)(y,{coords:c,radius:15e3,onBoundsChange:E}),L()&&Object(r.jsx)(S,{coords:c,range:15e3,travelMode:O}),Object(r.jsx)(j,{onResult:function(e){var t=e.coords,n=e.county;a(t),f(n)}}),Object(r.jsx)(g,{onChange:v})]}),Object(r.jsx)(C,{county:l,onResult:function(){}})]})},R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,112)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),r(e),o(e),c(e),a(e)}))};s.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(L,{})}),document.getElementById("root")),R()}},[[74,1,2]]]);
//# sourceMappingURL=main.29187ae1.chunk.js.map