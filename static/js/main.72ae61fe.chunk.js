(this.webpackJsonp15k=this.webpackJsonp15k||[]).push([[0],{182:function(e,t,n){},482:function(e,t,n){"use strict";n.r(t);var o=n(7),r=n(0),a=n.n(r),c=n(8),i=n.n(c),s=(n(182),n(15)),u=n(516),l=n(510),f=n(515),j=function(e){var t=Object(r.useState)(!1),n=Object(s.a)(t,2),a=(n[0],n[1],Object(r.useState)(null)),c=Object(s.a)(a,2),i=c[0],j=c[1],d=Object(r.useState)(""),b=Object(s.a)(d,2),v=b[0],O=b[1];return Object(o.jsxs)(l.a,{elevation:3,className:"form",children:[Object(o.jsx)("form",{onSubmit:function(t){t.preventDefault(),e.platform.getSearchService().geocode({q:v},(function(t){var n=t.items[0];if(n){var o=n.position,r=n.title,a=n.address,c=a.county,i=a.postalCode;e.onResult({coords:o,county:c,postalCode:i}),O(r)}else j("Nothing found for this input.")}),(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.error("GEOCODING ERROR!",t),j("Something went wrong. Please try again.")}))},children:Object(o.jsx)(f.a,{fullWidth:!0,label:"Search for address",variant:"outlined",value:v,onChange:function(e){j(!1),O(e.target.value)},error:!!i})}),i&&Object(o.jsx)(u.a,{severity:"error",children:i})]})},d=n(165),b=n.n(d),v=n(166),O=n.n(v),m=n(517),p=n(514),g=function(e){var t=Object(r.useState)("car"),n=Object(s.a)(t,2),a=n[0],c=n[1];return Object(o.jsx)(l.a,{elevation:3,className:"travel-mode-select",children:Object(o.jsxs)(m.a,{value:a,exclusive:!0,onChange:function(t,n){c(n),e.onChange(n)},children:[Object(o.jsx)(p.a,{value:"car",children:Object(o.jsx)(b.a,{})}),Object(o.jsx)(p.a,{value:"pedestrian",children:Object(o.jsx)(O.a,{})})]})})},h=n(24),x=(n(187),function(e){var t=Object(r.useRef)(null),n=Object(r.useState)(null),c=Object(s.a)(n,2),i=c[0],u=c[1],l=Object(r.useState)(null),f=Object(s.a)(l,2),j=f[0],d=f[1];Object(r.useLayoutEffect)((function(){if(t.current){var n=new h.a.service.Platform({apikey:"mPpQR16YV3tZ3YpokLwD4hFCEpwCKJWXe9Q-wv4EXIU"});d(n);var o=n.createDefaultLayers(),r=new h.a.Map(t.current,o.vector.normal.map,{pixelRatio:window.devicePixelRatio,center:e.center,zoom:e.zoom});new h.a.mapevents.Behavior(new h.a.mapevents.MapEvents(r));return u(r),function(){return r.dispose()}}}),[t]),Object(r.useEffect)((function(){if(i){var t=function(e){i.getViewPort().resize()},n=function(t){var n=i.screenToGeo(t.currentPointer.viewportX,t.currentPointer.viewportY);e.onClick(n)};return window.addEventListener("resize",t),i.addEventListener("tap",n),function(){window.removeEventListener("resize",t),i.removeEventListener("tap",n)}}}),[i]),Object(r.useEffect)((function(){i&&(i.setCenter(e.center),e.zoomBounds?i.getViewModel().setLookAtData({bounds:e.zoomBounds}):i.setZoom(e.zoom))}),[e.center,e.zoom,e.zoomBounds]);return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"map",ref:t}),i?function(){var t=e.children;if(t)return a.a.Children.map(t,(function(e){if(e)return a.a.cloneElement(e,{map:i,platform:j})}))}():"Loading\u2026"]})}),w=function(e){return Object(r.useEffect)((function(){var t=new h.a.map.Marker(e.coords);return e.map.addObject(t),function(){return e.map.removeObject(t)}}),[e.coords]),null},C=function(e){var t={fillColor:"rgba(255, 255, 255, 0)",lineDash:[3,3],lineWidth:3};return Object(r.useEffect)((function(){var n=new h.a.map.Circle(e.coords,e.radius,{style:t});return e.map.addObject(n),e.onBoundsChange(n.getBoundingBox()),function(){return e.map.removeObject(n)}}),[e.coords,e.radius]),null},S=n(107),E=function(e){var t=Object(r.useState)(null),n=Object(s.a)(t,2),o=n[0],a=n[1],c={lineWidth:0};return Object(r.useEffect)((function(){e.platform.getRoutingService(null,8);var t={start:"geo!".concat(e.coords.lat,",").concat(e.coords.lng),range:e.range,rangetype:e.rangeType||"distance",mode:"shortest;".concat(e.travelMode)};fetch("https://isoline.route.ls.hereapi.com/routing/7.2/calculateisoline.json?"+function(e){var t="";for(var n in e)""!=t&&(t+="&"),t+=n+"="+encodeURIComponent(e[n]);return t}(Object(S.a)(Object(S.a)({},t),{},{apikey:e.platform.a}))).then((function(e){return e.json()})).then((function(e){var t=e.response.isoline[0].component[0].shape.map((function(e){return e.split(",")})).flat().map((function(e){return+e}));a(h.a.geo.LineString.fromLatLngArray(t))}))}),[e.coords,e.range,e.travelMode]),Object(r.useEffect)((function(){if(o){var t=new h.a.map.Polygon(o,e.radius,{style:c});return e.map.addObject(t),function(){return e.map.removeObject(t)}}}),[o]),null},y={lat:51.354050638053394,lng:10.688718943513482},L=function(e){var t=Object(r.useState)(y),n=Object(s.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)(null),l=Object(s.a)(i,2),f=(l[0],l[1]),d=Object(r.useState)("car"),b=Object(s.a)(d,2),v=b[0],O=b[1],m=Object(r.useState)(),p=Object(s.a)(m,2),h=p[0],S=p[1],L=Object(r.useState)(null),z=Object(s.a)(L,2),B=z[0],P=z[1];Object(r.useEffect)((function(){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){c(function(e){return{lat:e.latitude,lng:e.longitude}}(e.coords))}),(function(){return P("Geolocation is not available.")})):P("Geolocation is not supported.")}),[]);var R=function(){return!Object.is(a,y)};return Object(o.jsxs)("div",{className:"App",children:[Object(o.jsxs)(x,{center:a,zoom:R()?12:8,zoomBounds:h,children:[R()&&Object(o.jsx)(w,{coords:a}),R()&&Object(o.jsx)(C,{coords:a,radius:15e3,onBoundsChange:S}),R()&&Object(o.jsx)(E,{coords:a,range:15e3,travelMode:v}),Object(o.jsx)(j,{onResult:function(e){var t=e.coords,n=e.county;return c(t)&&f(n)}}),Object(o.jsx)(g,{onChange:O})]}),B&&Object(o.jsx)(u.a,{onClose:function(){return P(null)},className:"error-msg",severity:"error",children:B.message})]})},z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,519)).then((function(t){var n=t.getCLS,o=t.getFID,r=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),o(e),r(e),a(e),c(e)}))};i.a.render(Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(L,{})}),document.getElementById("root")),z()}},[[482,1,2]]]);
//# sourceMappingURL=main.72ae61fe.chunk.js.map