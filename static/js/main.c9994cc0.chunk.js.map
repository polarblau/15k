{"version":3,"sources":["components/SearchForm/index.js","components/TravelModeSelect/index.js","components/Map/index.js","components/Marker/index.js","components/Circle/index.js","components/Isoline/index.js","lib/countyHelpers.js","App.js","reportWebVitals.js","index.js"],"names":["SearchForm","props","useState","error","setError","warning","setWarning","info","setInfo","address","setAddress","useEffect","location","countyStatus","county","Math","round","incidenceValue","updatedAt","Paper","elevation","className","onSubmit","evt","preventDefault","platform","getSearchService","geocode","q","data","result","items","coords","position","title","postalCode","onResult","args","console","TextField","fullWidth","label","variant","value","onChange","target","Alert","severity","TravelModeSelect","travelMode","setTravelMode","ToggleButtonGroup","exclusive","ToggleButton","Map","mapRef","useRef","map","setMap","setPlatform","useLayoutEffect","current","hPlatform","H","service","Platform","apiKey","defaultLayers","createDefaultLayers","hMap","vector","normal","pixelRatio","window","devicePixelRatio","center","zoom","mapevents","Behavior","MapEvents","dispose","onResize","getViewPort","resize","onTap","screenToGeo","currentPointer","viewportX","viewportY","onClick","addEventListener","removeEventListener","setCenter","zoomBounds","getViewModel","setLookAtData","bounds","setZoom","ref","children","React","Children","c","cloneElement","renderChildren","Marker","marker","addObject","removeObject","Circle","color","setColor","style","fillColor","strokeColor","lineDash","lineWidth","circle","radius","onBoundsChange","getBoundingBox","Isoline","polyline","setPolyline","getRoutingService","params","start","lat","lng","range","rangetype","rangeType","mode","fetch","obj","str","key","encodeURIComponent","objToParams","apikey","a","then","response","json","latLngArray","isoline","component","shape","e","split","flat","geo","LineString","fromLatLngArray","polygon","Polygon","CountyHelper","options","hereAPIKey","Promise","resolve","reject","reverseGeocode","at","join","entries","features","count","attributes","GEN","cases7_per_100k","last_update","Object","fromEntries","prepCountyData","HERE_API_KEY","DEFAULT_COORDS","App","setLocation","CountyHelpers","getCounty","getCountyInfo","setZoomBounds","navigator","geolocation","getCurrentPosition","latitude","longitude","catch","countyInfo","coordsSet","is","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c9994cc0.chunk.js","sourcesContent":["import { useState, useEffect } from 'react'\nimport { Paper, TextField } from '@material-ui/core'\nimport Alert from '@material-ui/lab/Alert'\n\n\nconst SearchForm = (props) => {\n  const [error, setError] = useState(null)\n  const [warning, setWarning] = useState(null)\n  const [info, setInfo] = useState(null)\n  const [address, setAddress] = useState('')\n\n  const handleSubmit = (evt) => {\n    evt.preventDefault()\n    const service = props.platform.getSearchService()\n    service.geocode({ q: address }, \n      (data) => {\n        const result = data.items[0]\n        if (!result) {\n          setError('Nothing found for this input.')\n          return\n        }\n        const coords = result.position\n        const address = result.title\n        const {county, postalCode} = result.address\n        props.onResult({ coords, county, postalCode })\n        setAddress(address)\n      }, \n      (...args) => {\n        console.error('GEOCODING ERROR!', args)\n        setError('Something went wrong. Please try again.')\n      }\n    )\n  }\n\n  const handleAddressInput = (evt) => {\n    setError(false)\n    setAddress(evt.target.value)\n  }\n\n  useEffect(() => {\n    setWarning(null)\n    setInfo(null)\n    if (props.location.countyStatus == 'hotSpot') {\n      setWarning(`\n        The county of \"${props.location.county}\" has been declared a \n        COVID-19 hotspot due to a 7 day incident value of \n        ${Math.round(props.location.incidenceValue)} per 100.000 \n        inhabitants. You may not travel further than 15km from your home \n        at this moment. (Last updated: ${props.location.updatedAt})\n      `)\n    } else if (props.location.incidenceValue) {\n      setInfo(`\n        The county of \"${props.location.county}\" has a 7 day incident value of \n        ${Math.round(props.location.incidenceValue)} per 100.000 inhabitants\n        ${props.location.countyStatus == 'riskArea' ? ' and is considered a high risk area.' : '.'} \n        (Last updated: ${props.location.updatedAt})\n      `)\n    }\n  }, [props.location])\n\n  return (\n    <Paper elevation={3} className=\"form\">\n      <form onSubmit={handleSubmit}>\n        <TextField \n          fullWidth \n          label=\"Search for address\" \n          variant=\"outlined\" \n          value={address}\n          onChange={handleAddressInput}\n          error={!!error}\n        />\n      </form>\n      { warning && <Alert severity=\"warning\" className=\"addendum\">{warning}</Alert> }\n      { (error && !info) && <Alert severity=\"error\" className=\"addendum\">{error}</Alert> }\n      { (info && !warning) && <Alert severity=\"info\" className=\"addendum\">{info}</Alert> }\n    </Paper>\n  )\n}\n\nexport default SearchForm","import { useState } from 'react'\nimport DirectionsCarIcon from '@material-ui/icons/DirectionsCar'\nimport DirectionsWalkIcon from '@material-ui/icons/DirectionsWalk'\nimport { Paper } from '@material-ui/core'\nimport { ToggleButtonGroup, ToggleButton } from '@material-ui/lab/'\n\nconst TravelModeSelect = (props) => {\n  const [travelMode, setTravelMode] = useState('car')\n\n  const handleChange = (evt, value) => {\n    setTravelMode(value)\n    props.onChange(value)\n  }\n\n  return (\n    <Paper elevation={3} className=\"travel-mode-select\">\n      <ToggleButtonGroup\n        value={travelMode}\n        exclusive\n        onChange={handleChange}\n      >\n        <ToggleButton value=\"car\" >\n          <DirectionsCarIcon />\n        </ToggleButton>\n        <ToggleButton value=\"pedestrian\" >\n          <DirectionsWalkIcon />\n        </ToggleButton>\n      </ToggleButtonGroup>\n    </Paper>\n  )\n}\n\nexport default TravelModeSelect","import React, { useRef, useLayoutEffect, useState, useEffect } from 'react'\nimport H from \"@here/maps-api-for-javascript\"\n\nconst Map = (props) => {\n  const mapRef = useRef(null)\n  const [map, setMap] = useState(null)\n  const [platform, setPlatform] = useState(null)\n\n  useLayoutEffect(() => {\n    if (!mapRef.current) return;\n\n    const hPlatform = new H.service.Platform({\n      'apikey': props.apiKey\n    })\n\n    setPlatform(hPlatform)\n\n    const defaultLayers = hPlatform.createDefaultLayers()\n\n    const hMap = new H.Map(\n      mapRef.current,\n      defaultLayers.vector.normal.map,\n      {\n        pixelRatio: window.devicePixelRatio,\n        center: props.center,\n        zoom: props.zoom\n      }\n    )\n\n    const behavior = new H.mapevents.Behavior(new H.mapevents.MapEvents(hMap))\n    // const ui = H.ui.UI.createDefault(hMap, defaultLayers, 'de-DE')\n\n    setMap(hMap)\n\n    return () => hMap.dispose()\n  }, [mapRef])\n\n  useEffect(() => {\n    if (!map) return\n\n    const onResize = (evt) => {\n      map.getViewPort().resize()\n    }\n\n    const onTap = (evt) => {\n      const coords = map.screenToGeo(\n        evt.currentPointer.viewportX,\n        evt.currentPointer.viewportY\n      )\n      props.onClick(coords)\n    }\n\n    window.addEventListener('resize', onResize)\n    map.addEventListener('tap', onTap)\n\n    return () => {\n      window.removeEventListener('resize', onResize)\n      map.removeEventListener('tap', onTap)\n    }\n  }, [map])\n\n  useEffect(() => {\n    if (!map) return\n    map.setCenter(props.center)\n    if (props.zoomBounds) {\n      map.getViewModel().setLookAtData({ bounds: props.zoomBounds })\n    } else {\n      map.setZoom(props.zoom)\n    }\n  }, [props.center, props.zoom, props.zoomBounds])\n\n\n  const renderChildren = () => {\n    const { children } = props\n    if (!children) return\n\n    return React.Children.map(children, c => {\n      if (!c) return\n      return React.cloneElement(c, { map, platform })\n    })\n  }\n\n  return (\n    <>\n      <div className=\"map\" ref={mapRef} />\n      { map ? renderChildren() : \"Loading…\"}\n    </>\n  )\n\n}\n\nexport default Map","import { useEffect } from \"react\"\nimport H from \"@here/maps-api-for-javascript\"\n\nconst Marker = (props) => {\n\n  useEffect(() => {\n    const marker = new H.map.Marker(props.location.coords)\n    props.map.addObject(marker)\n\n    return () => props.map.removeObject(marker)\n\n  }, [props.location.coords])\n\n  return null\n}\n\nexport default Marker","import { useEffect, useState } from \"react\"\nimport H from \"@here/maps-api-for-javascript\"\n\nconst Circle = (props) => {\n  const [color, setColor] = useState('#00BEEC')\n\n  // red: #FF443F 250,68,63\n  // green: #FF443F 5,200,36\n  // blue: #00BEEC 0,190,236\n\n  useEffect(() => {\n    setColor(props.location.countyStatus == 'hotSpot' ? '#FF443F' : '#00BEEC')\n  }, [props.location.countyStatus])\n\n  useEffect(() => {\n    const style = {\n      fillColor: 'rgba(255, 255, 255, 0)',\n      strokeColor: color, \n      lineDash: [3, 3],\n      lineWidth: 3\n    }\n\n    const circle = new H.map.Circle(props.location.coords, props.radius, { style })\n    props.map.addObject(circle)\n    props.onBoundsChange(circle.getBoundingBox())\n\n    return () => props.map.removeObject(circle)\n\n  }, [props.location, color])\n\n  return null\n}\n\nexport default Circle","import { useEffect, useState } from \"react\"\nimport H from \"@here/maps-api-for-javascript\"\n\nconst objToParams = (obj) => {\n  let str = \"\";\n  for (let key in obj) {\n    if (str != \"\") str += \"&\";\n    str += key + \"=\" + encodeURIComponent(obj[key])\n  }\n  return str\n}\n\nconst Isoline = (props) => {\n  const [polyline, setPolyline] = useState(null)\n\n  const style = {\n    lineWidth: 0\n  }\n\n  useEffect(() => {\n    const router = props.platform.getRoutingService(null, 8)\n    const params = {\n      start: `geo!${props.location.coords.lat},${props.location.coords.lng}`,\n      range: props.range,\n      rangetype: props.rangeType || 'distance',\n      mode: `shortest;${props.travelMode}`\n    }\n\n    const apiPath = \"https://isoline.route.ls.hereapi.com/routing/7.2/calculateisoline.json?\"\n    fetch(apiPath + objToParams({ ...params, apikey: props.platform.a}))\n      .then(response => response.json())\n      .then(({ response }) => {\n        const latLngArray = response.isoline[0].component[0].shape\n          .map(e => e.split(',')).flat().map((e => +e))\n        setPolyline(H.geo.LineString.fromLatLngArray(latLngArray))\n      })\n\n\n  }, [props.location.coords, props.range, props.travelMode])\n\n  useEffect(() => {\n    if (!polyline) return\n    const polygon = new H.map.Polygon(polyline, props.radius, { style })\n    props.map.addObject(polygon)\n\n    return () => props.map.removeObject(polygon)\n  }, [polyline])\n\n  return null\n}\n\nexport default Isoline","import H from \"@here/maps-api-for-javascript\"\n\nconst COUNTY_INFO_ENDPOINT = 'https://services7.arcgis.com/mOBPykOjAyBO2ZKk/arcgis/rest/services/RKI_Landkreisdaten/FeatureServer/0/query?where=1%3D1&outFields=GEN,cases_per_population,county,last_update,cases7_per_100k,cases_per_100k&returnGeometry=false&outSR=4326&f=json'\n\nconst prepCountyData = ({ features }) => {\n  const calcStatus = (count) => {\n    if (count > 200) return 'hotSpot'\n    if (count > 50) return 'riskArea'\n    return 'ok'\n  }\n\n  const entries = features.map(({ attributes }) => {\n    return [attributes.GEN, {\n      county: attributes.GEN,\n      incidenceValue: attributes.cases7_per_100k,\n      countyStatus: calcStatus(attributes.cases7_per_100k),\n      updatedAt: attributes.last_update\n    }]\n  })\n\n  return Object.fromEntries(entries)\n}\n\nconst CountyHelper = (options) => {\n  if (!options.hereAPIKey) throw 'HERE API Key required.'\n\n  const getCounty = (coords) => {\n    const platform = new H.service.Platform({ apiKey: options.hereAPIKey })\n    const service = platform.getSearchService()\n\n    return new Promise((resolve, reject) => {\n      service.reverseGeocode({\n        at: [coords.lat, coords.lng, 0].join(',')\n      }, (result) => { \n        resolve(result.items[0].address.county)\n      }, reject)\n    })\n  }\n\n  const getCountyInfo = (county) => {\n    return fetch(COUNTY_INFO_ENDPOINT)\n      .then(response => response.json())\n      .then((data) => {\n        return prepCountyData(data)[county]\n      })\n  }\n\n  return [getCounty, getCountyInfo]\n}\n\nexport default CountyHelper","import { useState, useEffect } from 'react'\n\nimport SearchForm from './components/SearchForm'\nimport TravelModeSelect from './components/TravelModeSelect'\nimport Map from './components/Map'\nimport Marker from './components/Marker'\nimport Circle from './components/Circle'\nimport Isoline from './components/Isoline'\n\nimport CountyHelpers from './lib/countyHelpers.js'\n\nconst HERE_API_KEY = 'mPpQR16YV3tZ3YpokLwD4hFCEpwCKJWXe9Q-wv4EXIU'\nconst DEFAULT_COORDS = { lat: 51.354050638053394, lng: 10.688718943513482 } // Germany\nconst RANGE = 15 * 1000 // 15km\n\nconst coordsToHERECoords = (coords) => {\n  return { lat: coords.latitude, lng: coords.longitude }\n}\n\nconst App = (props) => {\n  const [location, setLocation] = useState({ coords: DEFAULT_COORDS })\n  const [getCounty, getCountyInfo] = CountyHelpers({ hereAPIKey: HERE_API_KEY })\n  const [travelMode, setTravelMode] = useState('car')\n  const [zoomBounds, setZoomBounds] = useState()\n\n  useEffect(() => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition((position) => {\n        setLocation({ coords: coordsToHERECoords(position.coords) })\n      })\n    }\n  }, [])\n\n  useEffect(() => {\n    if (location.coords && !location.county) {\n      getCounty(location.coords).then((county) => {\n        setLocation({ ...location, county })\n      }).catch(console.error)\n    }\n    if (location.coords && location.county && !location.countyStatus) {\n      getCountyInfo(location.county).then((countyInfo) => {\n        if (countyInfo) setLocation({ ...location, ...countyInfo })\n      })\n    }\n  }, [location])\n\n  const coordsSet = () => !Object.is(location.coords, DEFAULT_COORDS)\n\n  const handleSearchResult = ({ coords, county }) => {\n    setLocation({ coords, county })\n  }\n\n  return (\n    <div className=\"App\">\n      <Map center={location.coords}\n        zoom={coordsSet() ? 12 : 8}\n        zoomBounds={zoomBounds}\n        onClick={() => { }}\n        apiKey={HERE_API_KEY}\n      >\n        {coordsSet() && <Marker location={location} />}\n        {coordsSet() && <Circle location={location}\n          radius={RANGE}\n          onBoundsChange={setZoomBounds} />}\n        {coordsSet() && <Isoline location={location}\n          range={RANGE}\n          travelMode={travelMode} />}\n        <SearchForm onResult={handleSearchResult} location={location} />\n        <TravelModeSelect onChange={setTravelMode} />\n      </Map>\n    </div>\n  )\n}\n\nexport default App\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}