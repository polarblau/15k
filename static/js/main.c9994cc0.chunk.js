(this.webpackJsonp15k=this.webpackJsonp15k||[]).push([[0],{67:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var o=n(6),a=n(0),c=n.n(a),r=n(9),i=n.n(r),u=(n(67),n(20)),s=n(11),l=n(103),d=n(108),f=n(109),j=function(e){var t=Object(a.useState)(null),n=Object(s.a)(t,2),c=n[0],r=n[1],i=Object(a.useState)(null),u=Object(s.a)(i,2),j=u[0],b=u[1],p=Object(a.useState)(null),O=Object(s.a)(p,2),v=O[0],m=O[1],h=Object(a.useState)(""),g=Object(s.a)(h,2),y=g[0],S=g[1];return Object(a.useEffect)((function(){b(null),m(null),"hotSpot"==e.location.countyStatus?b('\n        The county of "'.concat(e.location.county,'" has been declared a \n        COVID-19 hotspot due to a 7 day incident value of \n        ').concat(Math.round(e.location.incidenceValue)," per 100.000 \n        inhabitants. You may not travel further than 15km from your home \n        at this moment. (Last updated: ").concat(e.location.updatedAt,")\n      ")):e.location.incidenceValue&&m('\n        The county of "'.concat(e.location.county,'" has a 7 day incident value of \n        ').concat(Math.round(e.location.incidenceValue)," per 100.000 inhabitants\n        ").concat("riskArea"==e.location.countyStatus?" and is considered a high risk area.":"."," \n        (Last updated: ").concat(e.location.updatedAt,")\n      "))}),[e.location]),Object(o.jsxs)(l.a,{elevation:3,className:"form",children:[Object(o.jsx)("form",{onSubmit:function(t){t.preventDefault(),e.platform.getSearchService().geocode({q:y},(function(t){var n=t.items[0];if(n){var o=n.position,a=n.title,c=n.address,i=c.county,u=c.postalCode;e.onResult({coords:o,county:i,postalCode:u}),S(a)}else r("Nothing found for this input.")}),(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.error("GEOCODING ERROR!",t),r("Something went wrong. Please try again.")}))},children:Object(o.jsx)(d.a,{fullWidth:!0,label:"Search for address",variant:"outlined",value:y,onChange:function(e){r(!1),S(e.target.value)},error:!!c})}),j&&Object(o.jsx)(f.a,{severity:"warning",className:"addendum",children:j}),c&&!v&&Object(o.jsx)(f.a,{severity:"error",className:"addendum",children:c}),v&&!j&&Object(o.jsx)(f.a,{severity:"info",className:"addendum",children:v})]})},b=n(52),p=n.n(b),O=n(53),v=n.n(O),m=n(110),h=n(107),g=function(e){var t=Object(a.useState)("car"),n=Object(s.a)(t,2),c=n[0],r=n[1];return Object(o.jsx)(l.a,{elevation:3,className:"travel-mode-select",children:Object(o.jsxs)(m.a,{value:c,exclusive:!0,onChange:function(t,n){r(n),e.onChange(n)},children:[Object(o.jsx)(h.a,{value:"car",children:Object(o.jsx)(p.a,{})}),Object(o.jsx)(h.a,{value:"pedestrian",children:Object(o.jsx)(v.a,{})})]})})},y=n(13),S=function(e){var t=Object(a.useRef)(null),n=Object(a.useState)(null),r=Object(s.a)(n,2),i=r[0],u=r[1],l=Object(a.useState)(null),d=Object(s.a)(l,2),f=d[0],j=d[1];Object(a.useLayoutEffect)((function(){if(t.current){var n=new y.a.service.Platform({apikey:e.apiKey});j(n);var o=n.createDefaultLayers(),a=new y.a.Map(t.current,o.vector.normal.map,{pixelRatio:window.devicePixelRatio,center:e.center,zoom:e.zoom});new y.a.mapevents.Behavior(new y.a.mapevents.MapEvents(a));return u(a),function(){return a.dispose()}}}),[t]),Object(a.useEffect)((function(){if(i){var t=function(e){i.getViewPort().resize()},n=function(t){var n=i.screenToGeo(t.currentPointer.viewportX,t.currentPointer.viewportY);e.onClick(n)};return window.addEventListener("resize",t),i.addEventListener("tap",n),function(){window.removeEventListener("resize",t),i.removeEventListener("tap",n)}}}),[i]),Object(a.useEffect)((function(){i&&(i.setCenter(e.center),e.zoomBounds?i.getViewModel().setLookAtData({bounds:e.zoomBounds}):i.setZoom(e.zoom))}),[e.center,e.zoom,e.zoomBounds]);return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"map",ref:t}),i?function(){var t=e.children;if(t)return c.a.Children.map(t,(function(e){if(e)return c.a.cloneElement(e,{map:i,platform:f})}))}():"Loading\u2026"]})},E=function(e){return Object(a.useEffect)((function(){var t=new y.a.map.Marker(e.location.coords);return e.map.addObject(t),function(){return e.map.removeObject(t)}}),[e.location.coords]),null},w=function(e){var t=Object(a.useState)("#00BEEC"),n=Object(s.a)(t,2),o=n[0],c=n[1];return Object(a.useEffect)((function(){c("hotSpot"==e.location.countyStatus?"#FF443F":"#00BEEC")}),[e.location.countyStatus]),Object(a.useEffect)((function(){var t={fillColor:"rgba(255, 255, 255, 0)",strokeColor:o,lineDash:[3,3],lineWidth:3},n=new y.a.map.Circle(e.location.coords,e.radius,{style:t});return e.map.addObject(n),e.onBoundsChange(n.getBoundingBox()),function(){return e.map.removeObject(n)}}),[e.location,o]),null},x=function(e){var t=Object(a.useState)(null),n=Object(s.a)(t,2),o=n[0],c=n[1],r={lineWidth:0};return Object(a.useEffect)((function(){e.platform.getRoutingService(null,8);var t={start:"geo!".concat(e.location.coords.lat,",").concat(e.location.coords.lng),range:e.range,rangetype:e.rangeType||"distance",mode:"shortest;".concat(e.travelMode)};fetch("https://isoline.route.ls.hereapi.com/routing/7.2/calculateisoline.json?"+function(e){var t="";for(var n in e)""!=t&&(t+="&"),t+=n+"="+encodeURIComponent(e[n]);return t}(Object(u.a)(Object(u.a)({},t),{},{apikey:e.platform.a}))).then((function(e){return e.json()})).then((function(e){var t=e.response.isoline[0].component[0].shape.map((function(e){return e.split(",")})).flat().map((function(e){return+e}));c(y.a.geo.LineString.fromLatLngArray(t))}))}),[e.location.coords,e.range,e.travelMode]),Object(a.useEffect)((function(){if(o){var t=new y.a.map.Polygon(o,e.radius,{style:r});return e.map.addObject(t),function(){return e.map.removeObject(t)}}}),[o]),null},C=function(e){if(!e.hereAPIKey)throw"HERE API Key required.";return[function(t){var n=new y.a.service.Platform({apiKey:e.hereAPIKey}).getSearchService();return new Promise((function(e,o){n.reverseGeocode({at:[t.lat,t.lng,0].join(",")},(function(t){e(t.items[0].address.county)}),o)}))},function(e){return fetch("https://services7.arcgis.com/mOBPykOjAyBO2ZKk/arcgis/rest/services/RKI_Landkreisdaten/FeatureServer/0/query?where=1%3D1&outFields=GEN,cases_per_population,county,last_update,cases7_per_100k,cases_per_100k&returnGeometry=false&outSR=4326&f=json").then((function(e){return e.json()})).then((function(t){return function(e){var t=e.features.map((function(e){var t,n=e.attributes;return[n.GEN,{county:n.GEN,incidenceValue:n.cases7_per_100k,countyStatus:(t=n.cases7_per_100k,t>200?"hotSpot":t>50?"riskArea":"ok"),updatedAt:n.last_update}]}));return Object.fromEntries(t)}(t)[e]}))}]},k="mPpQR16YV3tZ3YpokLwD4hFCEpwCKJWXe9Q-wv4EXIU",P={lat:51.354050638053394,lng:10.688718943513482},L=function(e){var t=Object(a.useState)({coords:P}),n=Object(s.a)(t,2),c=n[0],r=n[1],i=C({hereAPIKey:k}),l=Object(s.a)(i,2),d=l[0],f=l[1],b=Object(a.useState)("car"),p=Object(s.a)(b,2),O=p[0],v=p[1],m=Object(a.useState)(),h=Object(s.a)(m,2),y=h[0],L=h[1];Object(a.useEffect)((function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){var t;r({coords:(t=e.coords,{lat:t.latitude,lng:t.longitude})})}))}),[]),Object(a.useEffect)((function(){c.coords&&!c.county&&d(c.coords).then((function(e){r(Object(u.a)(Object(u.a)({},c),{},{county:e}))})).catch(console.error),c.coords&&c.county&&!c.countyStatus&&f(c.county).then((function(e){e&&r(Object(u.a)(Object(u.a)({},c),e))}))}),[c]);var B=function(){return!Object.is(c.coords,P)};return Object(o.jsx)("div",{className:"App",children:Object(o.jsxs)(S,{center:c.coords,zoom:B()?12:8,zoomBounds:y,onClick:function(){},apiKey:k,children:[B()&&Object(o.jsx)(E,{location:c}),B()&&Object(o.jsx)(w,{location:c,radius:15e3,onBoundsChange:L}),B()&&Object(o.jsx)(x,{location:c,range:15e3,travelMode:O}),Object(o.jsx)(j,{onResult:function(e){var t=e.coords,n=e.county;r({coords:t,county:n})},location:c}),Object(o.jsx)(g,{onChange:v})]})})},B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,112)).then((function(t){var n=t.getCLS,o=t.getFID,a=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),o(e),a(e),c(e),r(e)}))};i.a.render(Object(o.jsx)(c.a.StrictMode,{children:Object(o.jsx)(L,{})}),document.getElementById("root")),B()}},[[74,1,2]]]);
//# sourceMappingURL=main.c9994cc0.chunk.js.map